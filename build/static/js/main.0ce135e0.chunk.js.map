{"version":3,"sources":["logo.svg","container/HOC.js","container/login.js","container/signup.js","container/home.js","container/main.js","App.js","index.js"],"names":["HOC","props","console","log","classname","className","children","Login","useState","redirect","redirect_t","data","setdata","getUser","a","axios","get","headers","then","res","value","localStorage","setItem","id","catch","token","getItem","to","style","width","method","onSubmit","e","email","target","password","body","JSON","stringify","post","x","login","preventDefault","placeholder","type","name","Signup","error","pass1","setTimeout","username","innerText","Axios","POST","Home","course","showQr","useEffect","err","response","status","getCourse","onClick","refresh","removeItem","logout","cursor","size","Main","result","delay","height","onError","onScan","markAttendance","App","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0ce135e0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react';\r\nimport './style.css';\r\n\r\nconst HOC=(props)=>{\r\n    console.log(props.classname)\r\n    return (\r\n        <div className={props.classname+' pic'}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\nexport default HOC;","import React,{useState} from 'react';\r\nimport HOC from './HOC';\r\nimport {Link,Redirect} from 'react-router-dom';\r\nimport axios from 'axios'\r\n\r\nconst Login=()=>{\r\n    const [data,setdata]=useState({\r\n        redirect:false,\r\n        redirect_t:false\r\n    })\r\n    const {redirect,redirect_t}=data\r\n    const actionPost=(e)=>{\r\n        const email = e.target.children[1].value;\r\n        const password = e.target.children[2].value;\r\n        // here the login url will be fetched in turn the jwt url will be hit\r\n        const body = JSON.stringify({email,password})\r\n        let headers = {\r\n            'Content-Type':'application/json'\r\n        }\r\n        async function login(){\r\n            const x = await axios.post('http://127.0.0.1:8000/api/token/',body,{headers})\r\n            console.log(x)\r\n            localStorage.setItem('access',x.data['access'])\r\n            localStorage.setItem('refresh',x.data['refresh'])\r\n            setdata({\r\n                redirect:true\r\n            })\r\n        }\r\n        login()\r\n        e.preventDefault()\r\n\r\n    }\r\n    if (redirect === true){\r\n        const token = localStorage.getItem('access')\r\n        let value = false\r\n        const headers = {\r\n            'Authorization':`JWT ${token}`,\r\n            'Content-Type':'application/json'\r\n        }\r\n        async function getUser(){\r\n            await axios.get('http://127.0.0.1:8000/get-user/',{headers})\r\n            .then((res)=>{\r\n                console.log(res.data)\r\n                value = res.data['Teacher']\r\n                console.log(value)\r\n                localStorage.setItem('course_id',res.data['Course'].id)\r\n                setdata({\r\n                    ...data,\r\n                    redirect_t:true\r\n                })\r\n            })\r\n            .catch(()=>{\r\n                setdata({\r\n                    ...data,\r\n                    redirect_t:false\r\n                })\r\n            })\r\n            \r\n        }\r\n        getUser()\r\n \r\n    }\r\n    if (redirect_t===false && redirect===true){\r\n        console.log('here')\r\n        return <Redirect to={'/main/'} />\r\n    }\r\n    else if (redirect_t===true && redirect===true){\r\n        return <Redirect to={'/'} /> \r\n    }\r\n \r\n \r\n    return(\r\n        <HOC classname='d-flex'>\r\n            <div className='container border  p-5 align-self-center' style={{width:35+'%'}}>\r\n                <form method='POST' onSubmit={actionPost}>\r\n                    <legend className='text-center'>Login</legend>\r\n                    <input placeholder='Email' className='form-control' type='text' name='email' />\r\n                    <input placeholder='Password' className='form-control my-2' type='password' name='password' />\r\n                    <button className='btn btn-success w-100'>\r\n                        Login\r\n                    </button>\r\n                    <small>\r\n                        <Link to={'/signup/'}>Sign up here</Link>\r\n                    </small>\r\n                </form>\r\n            </div>\r\n        </HOC>\r\n    )\r\n}\r\nexport default Login;","import React,{useState} from 'react';\r\nimport HOC from './HOC';\r\nimport {Link,Redirect} from 'react-router-dom';\r\nimport 'axios'\r\nimport Axios from 'axios';\r\n\r\nconst Signup=()=>{\r\n    const [data,setdata] = useState({\r\n        error:false\r\n    })\r\n    const {error} = data\r\n\r\n    const actionSignUp=(e)=>{\r\n        const pass1 = e.target.children[3].value;\r\n        const pass2 = e.target.children[4].value;\r\n        if ((pass1 !== pass2)){\r\n            setdata({\r\n                error:true\r\n            })\r\n            setTimeout(()=>{\r\n                setdata({\r\n                    error:false\r\n                })\r\n            },3000)\r\n        }\r\n        const email = e.target.children[1].value;\r\n        const username = e.target.children[2].value;\r\n        console.log(e.target.children[1].innerText)\r\n\r\n        // signing up here and then redirecting to login page \r\n        const headers={\r\n            'Content-Type':'application/json'\r\n        }\r\n        const body = JSON.stringify({'email':email,'username':username,'password':pass1})\r\n        async function POST(){\r\n            console.log(body)\r\n            await Axios.post('http://127.0.0.1:8000/signup/',body,\r\n            {\r\n                headers\r\n            })\r\n            return <Redirect to='/login/'/>\r\n        }\r\n        POST();\r\n        \r\n        e.preventDefault();\r\n    }\r\n\r\n    return(\r\n        <HOC classname='d-flex'>\r\n            <div className='container border p-5 align-self-center' style={{width:35+'%'}}>\r\n                <form method='POST' onSubmit={actionSignUp}>\r\n                    <legend className='text-center'>Sign Up</legend>\r\n                    <input placeholder='Email' type='email' name='email' className='form-control'/>\r\n                    <input placeholder='Name' type='text' name='name' className='form-control my-2'/>\r\n                    <input placeholder='Password' type='password' name='password1' className='form-control'/>\r\n                    <input placeholder='Confirm Password' type='password' name='password1' className='form-control my-2'/>\r\n                    {error?<p className='text-danger'>Passwords do not match!</p>:null}\r\n                    <button className='btn btn-primary w-100'>\r\n                        Sign up\r\n                    </button>\r\n                    <small><Link to='/login/'>Login Here</Link></small>\r\n                    \r\n                </form>\r\n            </div>\r\n        </HOC>\r\n    )\r\n}\r\nexport default Signup;","import React,{useEffect,useState} from 'react';\r\nimport HOC from './HOC';\r\nimport QRCode from 'qrcode.react'\r\nimport axios from 'axios'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\n\r\nconst Home=()=>{\r\n    const [data,setdata]=useState({\r\n        course:'',\r\n        showQr:false,\r\n        redirect:false\r\n    })\r\n    const {course,showQr,redirect} = data\r\n    useEffect(()=>{\r\n        async function getCourse(){\r\n            const id = localStorage.getItem('course_id')\r\n            const token = localStorage.getItem('access')\r\n            const headers={\r\n                'Authorization':`JWT ${token}`,\r\n                'Content-Type':'application/json'\r\n            }\r\n            await axios.get('http://127.0.0.1:8000/to-qr-code/'+id+'/',{headers})\r\n            .then((res)=>{\r\n                setdata({\r\n                    course:res.data['name'],\r\n                    showQr:true\r\n                })\r\n            })\r\n            .catch((err)=>{\r\n                if (err.response.status===401){\r\n                    setdata({\r\n                        redirect:true\r\n                    })\r\n                }\r\n            })\r\n\r\n        }\r\n        getCourse()\r\n    },[]);\r\n\r\n\r\n    const clicked=(e)=>{\r\n        const token = localStorage.getItem('access')\r\n        const refresh = localStorage.getItem('refresh')\r\n        console.log(refresh)\r\n        const headers={\r\n            'Authorization':`JWT ${token}`,\r\n            'Content-Type':'application/json'\r\n        }\r\n        async function logout(){\r\n            const x = axios.post('http://127.0.0.1:8000/logout/',JSON.stringify({refresh}),{headers})\r\n            console.log(x.data)\r\n            localStorage.removeItem('access','refresh')\r\n            setdata({\r\n                ...data,\r\n                redirect:true\r\n            })\r\n        }\r\n        logout()\r\n    }\r\n    if (redirect===true){\r\n        return <Redirect to='/login/' />\r\n    }\r\n\r\n    return(\r\n        <div classname='d-flex-column'>\r\n            <div className='text-center'>\r\n                <h1>\r\n                    Scan the qr code below to mark your attendance\r\n                </h1>\r\n                <span onClick={clicked} style={{cursor:'pointer',width:'fitContent'}}>Logout</span>\r\n            </div>\r\n            {showQr?(\r\n                <div className='mx-auto mt-5' style={{width:'fit-content'}}>\r\n                    <QRCode value={'http://127.0.0.1:8000/'+course+'/'} size={300}  />\r\n                </div>\r\n            )\r\n            :null\r\n            \r\n        }\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default Home;","import React,{useState} from 'react';\r\nimport HOC from './HOC'\r\nimport QrReader from 'react-qr-scanner'\r\nimport axios from 'axios';\r\n\r\nconst Main=()=>{\r\n    const [data,setdata] = useState({\r\n        result:'',\r\n\r\n    })\r\n    const {result} = data\r\n    const handleScan=(data)=>{\r\n        console.log(data)\r\n        if(data!==null){\r\n            async function markAttendance(){\r\n                const token = localStorage.getItem('access')\r\n                const headers={\r\n                    'Authorization':`JWT ${token}`,\r\n                    'Content-Type':'application/json'\r\n                }\r\n                axios.get(`${data}`,{headers})\r\n                .then((res)=>{\r\n                    console.log(res.data)\r\n                })\r\n            }\r\n            markAttendance()\r\n        }\r\n    }\r\n    const handleError=(err)=>{\r\n        console.log(err)\r\n    }\r\n    const previewStyle={\r\n        height: 240,\r\n        width: 320,\r\n    }\r\n    return(\r\n        <HOC>\r\n            <h2>Scan the Qr code</h2>\r\n        <QrReader\r\n          delay={3000}\r\n          style={previewStyle}\r\n          onError={handleError}\r\n          onScan={handleScan}\r\n          />\r\n        <p>{result}</p>\r\n        </HOC>\r\n    )\r\n}\r\n\r\nexport default Main;","import logo from './logo.svg';\nimport Login from './container/login';\nimport Signup from './container/signup';\nimport {BrowserRouter,Switch,Route} from 'react-router-dom'\nimport Home from './container/home';\nimport Main from './container/main';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n          <Route path='/' exact component={Home}/>\n          <Route path='/main/' component={Main} />\n          <Route path='/login/' component={Login} />\n          <Route path='/signup/' component={Signup} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />\n  ,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}
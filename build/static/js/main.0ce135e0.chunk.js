(this.webpackJsonpqr=this.webpackJsonpqr||[]).push([[0],{48:function(e,t,n){},50:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),r=n(38),o=n.n(r),s=(n(48),n.p,n(15)),i=n(5),l=n.n(i),u=n(11),p=n(14),d=(n(50),function(e){return console.log(e.classname),Object(c.jsx)("div",{className:e.classname+" pic",children:e.children})}),j=n(3),h=n(16),m=n(10),b=n.n(m),f=function(){var e=Object(a.useState)({redirect:!1,redirect_t:!1}),t=Object(p.a)(e,2),n=t[0],r=t[1],o=n.redirect,i=n.redirect_t;if(!0===o){var m=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("http://127.0.0.1:8000/get-user/",{headers:x}).then((function(e){console.log(e.data),O=e.data.Teacher,console.log(O),localStorage.setItem("course_id",e.data.Course.id),r(Object(s.a)(Object(s.a)({},n),{},{redirect_t:!0}))})).catch((function(){r(Object(s.a)(Object(s.a)({},n),{},{redirect_t:!1}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=localStorage.getItem("access"),O=!1,x={Authorization:"JWT ".concat(f),"Content-Type":"application/json"};m()}return!1===i&&!0===o?(console.log("here"),Object(c.jsx)(j.a,{to:"/main/"})):!0===i&&!0===o?Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)(d,{classname:"d-flex",children:Object(c.jsx)("div",{className:"container border  p-5 align-self-center",style:{width:"35%"},children:Object(c.jsxs)("form",{method:"POST",onSubmit:function(e){var t=e.target.children[1].value,n=e.target.children[2].value,c=JSON.stringify({email:t,password:n}),a={"Content-Type":"application/json"};function o(){return(o=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("http://127.0.0.1:8000/api/token/",c,{headers:a});case 2:t=e.sent,console.log(t),localStorage.setItem("access",t.data.access),localStorage.setItem("refresh",t.data.refresh),r({redirect:!0});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){o.apply(this,arguments)}(),e.preventDefault()},children:[Object(c.jsx)("legend",{className:"text-center",children:"Login"}),Object(c.jsx)("input",{placeholder:"Email",className:"form-control",type:"text",name:"email"}),Object(c.jsx)("input",{placeholder:"Password",className:"form-control my-2",type:"password",name:"password"}),Object(c.jsx)("button",{className:"btn btn-success w-100",children:"Login"}),Object(c.jsx)("small",{children:Object(c.jsx)(h.b,{to:"/signup/",children:"Sign up here"})})]})})})},O=function(){var e=Object(a.useState)({error:!1}),t=Object(p.a)(e,2),n=t[0],r=t[1],o=n.error;return Object(c.jsx)(d,{classname:"d-flex",children:Object(c.jsx)("div",{className:"container border p-5 align-self-center",style:{width:"35%"},children:Object(c.jsxs)("form",{method:"POST",onSubmit:function(e){var t=e.target.children[3].value;t!==e.target.children[4].value&&(r({error:!0}),setTimeout((function(){r({error:!1})}),3e3));var n=e.target.children[1].value,a=e.target.children[2].value;console.log(e.target.children[1].innerText);var o={"Content-Type":"application/json"},s=JSON.stringify({email:n,username:a,password:t});function i(){return(i=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,b.a.post("http://127.0.0.1:8000/signup/",s,{headers:o});case 3:return e.abrupt("return",Object(c.jsx)(j.a,{to:"/login/"}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){i.apply(this,arguments)}(),e.preventDefault()},children:[Object(c.jsx)("legend",{className:"text-center",children:"Sign Up"}),Object(c.jsx)("input",{placeholder:"Email",type:"email",name:"email",className:"form-control"}),Object(c.jsx)("input",{placeholder:"Name",type:"text",name:"name",className:"form-control my-2"}),Object(c.jsx)("input",{placeholder:"Password",type:"password",name:"password1",className:"form-control"}),Object(c.jsx)("input",{placeholder:"Confirm Password",type:"password",name:"password1",className:"form-control my-2"}),o?Object(c.jsx)("p",{className:"text-danger",children:"Passwords do not match!"}):null,Object(c.jsx)("button",{className:"btn btn-primary w-100",children:"Sign up"}),Object(c.jsx)("small",{children:Object(c.jsx)(h.b,{to:"/login/",children:"Login Here"})})]})})})},x=n(40),g=n.n(x),v=function(){var e=Object(a.useState)({course:"",showQr:!1,redirect:!1}),t=Object(p.a)(e,2),n=t[0],r=t[1],o=n.course,i=n.showQr,d=n.redirect;Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("course_id"),n=localStorage.getItem("access"),c={Authorization:"JWT ".concat(n),"Content-Type":"application/json"},e.next=5,b.a.get("http://127.0.0.1:8000/to-qr-code/"+t+"/",{headers:c}).then((function(e){r({course:e.data.name,showQr:!0})})).catch((function(e){401===e.response.status&&r({redirect:!0})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return!0===d?Object(c.jsx)(j.a,{to:"/login/"}):Object(c.jsxs)("div",{classname:"d-flex-column",children:[Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)("h1",{children:"Scan the qr code below to mark your attendance"}),Object(c.jsx)("span",{onClick:function(e){var t=localStorage.getItem("access"),c=localStorage.getItem("refresh");console.log(c);var a={Authorization:"JWT ".concat(t),"Content-Type":"application/json"};function o(){return(o=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=b.a.post("http://127.0.0.1:8000/logout/",JSON.stringify({refresh:c}),{headers:a}),console.log(t.data),localStorage.removeItem("access","refresh"),r(Object(s.a)(Object(s.a)({},n),{},{redirect:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){o.apply(this,arguments)}()},style:{cursor:"pointer",width:"fitContent"},children:"Logout"})]}),i?Object(c.jsx)("div",{className:"mx-auto mt-5",style:{width:"fit-content"},children:Object(c.jsx)(g.a,{value:"http://127.0.0.1:8000/"+o+"/",size:300})}):null]})},w=n(42),y=function(){var e=Object(a.useState)({result:""}),t=Object(p.a)(e,2),n=t[0],r=(t[1],n.result);return Object(c.jsxs)(d,{children:[Object(c.jsx)("h2",{children:"Scan the Qr code"}),Object(c.jsx)(w.a,{delay:3e3,style:{height:240,width:320},onError:function(e){console.log(e)},onScan:function(e){(console.log(e),null!==e)&&function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=localStorage.getItem("access"),c={Authorization:"JWT ".concat(n),"Content-Type":"application/json"},b.a.get("".concat(e),{headers:c}).then((function(e){console.log(e.data)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}}),Object(c.jsx)("p",{children:r})]})};var S=function(){return Object(c.jsx)(h.a,{children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/",exact:!0,component:v}),Object(c.jsx)(j.b,{path:"/main/",component:y}),Object(c.jsx)(j.b,{path:"/login/",component:f}),Object(c.jsx)(j.b,{path:"/signup/",component:O})]})})};o.a.render(Object(c.jsx)(S,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.0ce135e0.chunk.js.map